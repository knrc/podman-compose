version: "3.7"
services:
    web:
      image: busybox
      command: ["/bin/busybox", "httpd", "-f", "-h", "/etc/", "-p", "8000"]
      tmpfs:
        - /run
        - /tmp
    sleep:
      image: busybox
      command: ["/bin/busybox", "sh", "-c", "sleep 3600"]
      depends_on: "web"
      tmpfs:
        - /run
        - /tmp
    sleep2:
      image: busybox
      command: ["/bin/busybox", "sh", "-c", "sleep 3600"]
      depends_on:
      - sleep
      tmpfs:
        - /run
        - /tmp
    hello_world:
      image: busybox
      command: ["/bin/busybox", "sh", "-c", "echo 'hello world'"]
      depends_on:
        sleep:
          condition: service_started
      tmpfs:
        - /run
        - /tmp
      healthcheck:
        test: echo "hello world"
        interval: 10s
        timeout: 5s
        retries: 5
    hello_world_2:
      image: busybox
      command: ["/bin/busybox", "sh", "-c", "echo 'hello world'"]
      depends_on:
        sleep:
          condition: service_healthy
      tmpfs:
        - /run
        - /tmp
